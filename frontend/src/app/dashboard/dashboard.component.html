<div class="parent-container">
    <div class="container">
        <div class="left-section">
            <div class="search-and-filter-container">
                <div class="filter-container">
                    <div class="filter" (click)="openPopup('search-tag')">
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="#ffffffbd"
                                    d="M11.172 2a3 3 0 0 1 2.121.879l7.71 7.71a3.41 3.41 0 0 1 0 4.822l-5.592 5.592a3.41 3.41 0 0 1-4.822 0l-7.71-7.71A3 3 0 0 1 2 11.172V6a4 4 0 0 1 4-4zM7.5 5.5a2 2 0 0 0-1.995 1.85L5.5 7.5a2 2 0 1 0 2-2" />
                            </svg>
                        </div>
                        <div class="text font-calsans">
                            SEARCH BY TAG
                        </div>
                        @if (searchPopupVisible) {
                        <div class="popup-container search-tag" (click)="$event.stopPropagation()">
                            <app-search-tag-dialog (close)="closePopup('search-tag')" />
                        </div>
                        }
                    </div>
                    <div class="filter" (click)="openPopup('filter-dialog')">
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <g fill="none" fill-rule="evenodd">
                                    <path
                                        d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" />
                                    <path fill="#ffffffbd"
                                        d="M3 4.5A1.5 1.5 0 0 1 4.5 3h15A1.5 1.5 0 0 1 21 4.5v2.086A2 2 0 0 1 20.414 8L15 13.414v7.424a1.1 1.1 0 0 1-1.592.984l-3.717-1.858A1.25 1.25 0 0 1 9 18.846v-5.432L3.586 8A2 2 0 0 1 3 6.586z" />
                                </g>
                            </svg>
                        </div>
                        <div class="text font-calsans">
                            FILTER
                        </div>
                        @if (filterPopupVisible) {
                        <div class="popup-container filters" (click)="$event.stopPropagation()">
                            <app-filter-dialog (close)="closePopup('filter-dialog')" />
                        </div>
                        }
                    </div>
                </div>
                <div class="search-container">
                    <div class="search-bar">
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="currentColor"
                                    d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0s.41-1.08 0-1.49zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14" />
                            </svg>
                        </div>
                        <input type="text" class="search-input font-urbanist"
                            placeholder="seek and ye shall kinda maybe find" [(ngModel)]="searchTerm"
                            (input)="onSearch(searchTerm)" />
                    </div>
                </div>
            </div>
            <div class="results-text">
                <span class="font-calsans">YOUR SNIPPETS</span> &nbsp; <span class="font-urbanist message"> * behold:
                    the mess only you understand. *</span>
            </div>
            <div class="scroll-wrapper">
                <div class="card-scroll-section">
                    @for (snippet of snippets; track snippet) {
                    <app-snippet-card 
                        [title]="snippet.title" 
                        [tags]="snippet.tags ?? []"
                        (click)="setSelectedSnippet(snippet)" 
                    />
                    }
                </div>
            </div>
            <div class="cta-container font-calsans">
                WHAT'S ONE MORE ?
            </div>
        </div>
        <div class="right-section">
            <div class="profile-container font-calsans">
                <div class="text">ABHISHEK</div>
                <div class="profile">
                </div>
            </div>
            <div class="code-container" #codeContainer>
                @if (selectedSnippet) {
                <div class="snippet-topbar">
                    <div class="language font-calsans">
                        {{ selectedSnippet.language.toUpperCase() }}
                    </div>
                    <div class="snippet-actions">
                        <div class="action">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2">
                                    <path d="M7 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-1" />
                                    <path d="M20.385 6.585a2.1 2.1 0 0 0-2.97-2.97L9 12v3h3zM16 5l3 3" />
                                </g>
                            </svg>
                        </div>
                        <div class="action" (click)="copyCode()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="currentColor"
                                    d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593s1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.6 3.6 0 0 0 15.24 2" />
                                <path fill="currentColor"
                                    d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847S21 8.671 21 11.397v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936z" />
                            </svg>
                        </div>
                    </div>
                </div>
                <app-monaco-editor [code]="selectedSnippet.code" [language]="selectedSnippet.language"
                    [readonly]="true" />
                }
                <!-- <app-snippet-form/> -->
            </div>
        </div>
    </div>
</div>